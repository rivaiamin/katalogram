var kgApp=angular.module("kgApp",["angular-input-stars","ui.knob"]);kgApp.controller("kgController",["$scope","$http","$sce",function(a,t,o){var c=window.location.hostname;a.api="//api."+c+"/",a.files="//files."+c+"/";var l=window.location.href,e=l.split("#"),r=e[1];a.knob={},a.catalog={},a.catalog.avg_rate=0,a.knob.options={readOnly:!0,max:5,trackWidth:40,barWidth:30,trackColor:"#eee",barColor:"#0079ab",animate:{enabled:!1}},t.get(a.api+"catalog/"+r).success(function(t){catalog=t.product[0],catalog.product_desc=o.trustAsHtml(catalog.product_desc),catalog.product_data=o.trustAsHtml(catalog.product_data),catalog.num_plus=Object.keys(catalog.feedback_plus).length,catalog.num_minus=Object.keys(catalog.feedback_minus).length;var c=Object.keys(t.product[0].num_collect).length;0==c?catalog.num_collect=0:catalog.num_collect=catalog.num_collect[0].numCollect;for(var l=0,e=0,r=catalog.criteria,g=0;g<r.length;g++)0!=r[g].avg_criteria.length&&(l+=parseFloat(r[g].avg_criteria[0].criteria_rate)),e++;catalog.avg_rate=Number((l/e).toFixed(1)),console.log(catalog.avg_rate),a.productId=catalog.id,a.catalog=catalog})}]);