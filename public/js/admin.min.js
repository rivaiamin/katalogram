var kgCtrl=["$scope","$rootScope","$auth","$state","envService","Notification",function(t,n,e,i,o,u){n.env=o.read("all"),t.isAuthenticated=function(){return e.isAuthenticated()},t.logout=function(){e.logout(),i.go("login")},t.indexSearch=function(t,n){return t.map(function(t){return t.id}).indexOf(n)}}];
var authCtrl=["$scope","$auth","$state",function(n,t,o){n.login=function(n){t.login(n).then(function(n){o.go("dashboard")})["catch"](function(n){})}}];
var categoryCtrl=["$http","$scope","Upload","Notification",function(e,t,a,s){t.currentPage=1,t.limit=10,t.listCategory=function(){e.get(t.env.api+"category").success(function(e){t.category=e.category})},t.listCategory(),t.addCategory=function(o){t.categoryForm.fileimage.$valid&&t.fileimage&&(t.onProgress=!0,a.upload({url:t.env.api+"category/icon",method:"POST",data:{image:t.fileimage}}).then(function(a){e.post(t.env.api+"category",{category_name:o.name,category_desc:o.desc,category_icon:t.fileimage.name}).success(function(e){"success"==e.status&&(t.onProgress=!1,t.category.push(e.category),s({message:e.message},e.status),t.input={},t.fileimage={},$("#name").focus())})},function(e){s({message:e.message},e.status)},function(e){var a=parseInt(100*e.loaded/e.total);t.progress=a}))},t.saveCategory=function(a,s){return e.put(t.env.api+"category/"+s,a)},t.deleteCategory=function(a){var o=t.indexSearch(t.category,a);confirm("delete category?")&&e["delete"](t.env.api+"category/"+a).success(function(e){s({message:e.message},e.status),"success"==e.status&&t.category.splice(o,1)})}}];
var config=["$stateProvider","$httpProvider","$urlRouterProvider","$authProvider","$locationProvider","envServiceProvider",function(e,a,r,t,o,l){var i=["$q","$location","$auth",function(e,a,r){var t=e.defer();return r.isAuthenticated()?t.resolve():a.path("/kalana"),t.promise}],m=["$q","$auth",function(e,a){var r=e.defer();return a.isAuthenticated()?r.reject():r.resolve(),r.promise}];e.state("dashboard",{url:"/",templateUrl:"views/admin/dashboard.html",controller:"homeCtrl",resolve:{loginRequired:i}}).state("member",{url:"/member",templateUrl:"views/admin/member.html",controller:"memberCtrl",resolve:{loginRequired:i}}).state("category",{url:"/category",templateUrl:"views/admin/category.html",controller:"categoryCtrl",resolve:{loginRequired:i}}).state("login",{url:"/kalana",templateUrl:"views/admin/login.html",controller:"authCtrl",resolve:{skipIfLoggedIn:m}}),l.config({domains:{development:["localhost","katalogram.dev","admin.katalogram.dev"],production:["202.150.213.147","katalogram.com","admin.katalogram.com"]},vars:{development:{site:"//katalogram.dev/",api:"//api.katalogram.dev/",admin:"//admin.katalogram.dev/",file:"//files.katalogram.dev/"},production:{site:"//katalogram.com/",api:"//api.katalogram.com/",admin:"//admin.katalogram.com/",file:"//files.katalogram.com/"}}}),l.check(),o.html5Mode(!0),r.otherwise("/"),t.loginUrl="/kalana/auth"}];
var homeCtrl=function(){$(".connectedSortable").sortable({placeholder:"sort-highlight",connectWith:".connectedSortable",handle:".box-header, .nav-tabs",forcePlaceholderSize:!0,zIndex:999999}),$(".connectedSortable .box-header, .connectedSortable .nav-tabs-custom").css("cursor","move"),$(".todo-list").sortable({placeholder:"sort-highlight",handle:".handle",forcePlaceholderSize:!0,zIndex:999999}),$(".textarea").wysihtml5(),$(".daterange").daterangepicker({ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},startDate:moment().subtract(29,"days"),endDate:moment()},function(e,t){window.alert("You chose: "+e.format("MMMM D, YYYY")+" - "+t.format("MMMM D, YYYY"))}),$(".knob").knob();var e={US:398,SA:400,CA:1e3,DE:500,FR:760,CN:300,AU:700,BR:600,IN:800,GB:320,RU:3e3};$("#world-map").vectorMap({map:"world_mill_en",backgroundColor:"transparent",regionStyle:{initial:{fill:"#e4e4e4","fill-opacity":1,stroke:"none","stroke-width":0,"stroke-opacity":1}},series:{regions:[{values:e,scale:["#92c1dc","#ebf4f9"],normalizeFunction:"polynomial"}]},onRegionLabelShow:function(t,o,n){"undefined"!=typeof e[n]&&o.html(o.html()+": "+e[n]+" new visitors")}});var t=[1e3,1200,920,927,931,1027,819,930,1021];$("#sparkline-1").sparkline(t,{type:"line",lineColor:"#92c1dc",fillColor:"#ebf4f9",height:"50",width:"80"}),t=[515,519,520,522,652,810,370,627,319,630,921],$("#sparkline-2").sparkline(t,{type:"line",lineColor:"#92c1dc",fillColor:"#ebf4f9",height:"50",width:"80"}),t=[15,19,20,22,33,27,31,27,19,30,21],$("#sparkline-3").sparkline(t,{type:"line",lineColor:"#92c1dc",fillColor:"#ebf4f9",height:"50",width:"80"}),$("#calendar").datepicker();var o=new Morris.Area({element:"revenue-chart",resize:!0,data:[{y:"2011 Q1",item1:2666,item2:2666},{y:"2011 Q2",item1:2778,item2:2294},{y:"2011 Q3",item1:4912,item2:1969},{y:"2011 Q4",item1:3767,item2:3597},{y:"2012 Q1",item1:6810,item2:1914},{y:"2012 Q2",item1:5670,item2:4293},{y:"2012 Q3",item1:4820,item2:3795},{y:"2012 Q4",item1:15073,item2:5967},{y:"2013 Q1",item1:10687,item2:4460},{y:"2013 Q2",item1:8432,item2:5713}],xkey:"y",ykeys:["item1","item2"],labels:["Item 1","Item 2"],lineColors:["#a0d0e0","#3c8dbc"],hideHover:"auto"}),n=new Morris.Line({element:"line-chart",resize:!0,data:[{y:"2011 Q1",item1:2666},{y:"2011 Q2",item1:2778},{y:"2011 Q3",item1:4912},{y:"2011 Q4",item1:3767},{y:"2012 Q1",item1:6810},{y:"2012 Q2",item1:5670},{y:"2012 Q3",item1:4820},{y:"2012 Q4",item1:15073},{y:"2013 Q1",item1:10687},{y:"2013 Q2",item1:8432}],xkey:"y",ykeys:["item1"],labels:["Item 1"],lineColors:["#efefef"],lineWidth:2,hideHover:"auto",gridTextColor:"#fff",gridStrokeWidth:.4,pointSize:4,pointStrokeColors:["#efefef"],gridLineColor:"#efefef",gridTextFamily:"Open Sans",gridTextSize:10}),i=new Morris.Donut({element:"sales-chart",resize:!0,colors:["#3c8dbc","#f56954","#00a65a"],data:[{label:"Download Sales",value:12},{label:"In-Store Sales",value:30},{label:"Mail-Order Sales",value:20}],hideHover:"auto"});$(".box ul.nav a").on("shown.bs.tab",function(){o.redraw(),i.redraw(),n.redraw()}),$(".todo-list").todolist({onCheck:function(e){return window.console.log("The element has been checked"),e},onUncheck:function(e){return window.console.log("The element has been unchecked"),e}}),$.widget.bridge("uibutton",$.ui.button)};
var memberCtrl=["$http","$scope","Upload","Notification",function(e,t,i,m){t.currentPage=1,t.limit=10,t.listMember=function(){e.get(t.env.api+"member").success(function(e){t.member=e.member})},t.listMember()}];
app=angular.module("kgApp",["ui.router","satellizer","ngTouch","superswipe","ui-notification","ngFileUpload","angularUtils.directives.dirPagination","xeditable","environment"]),app.run(["editableOptions","editableThemes",function(t,e){e.bs3.inputClass="ui input",e.bs3.buttonsClass="ui button",t.theme="bs3"}]).config(config).controller("kgCtrl",kgCtrl).controller("homeCtrl",homeCtrl).controller("authCtrl",authCtrl).controller("memberCtrl",memberCtrl).controller("categoryCtrl",categoryCtrl);